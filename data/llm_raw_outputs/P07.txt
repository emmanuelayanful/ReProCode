{
    "paper_id": "P07",
    "repo_name": "code-rag-bench/code-rag-bench",
    "env": {
        "type": "conda",
        "setup_commands": [
            "micromamba create -n crag python=3.10 -y",
            "micromamba activate crag",
            "micromamba install -n crag pip -y",
            "micromamba run -n crag pip install -r requirements.txt"
        ]
    },
    "steps": [
        {
            "id": "installation",
            "description": "Installation of the required dependencies",
            "working_dir": ".",
            "commands": [
                "micromamba run -n crag pip install -r requirements.txt"
            ],
            "expected_artifacts": ["requirements.txt"]
        },
        {
            "id": "retrieval_dense_embeddings",
            "description": "Run dense embedding models",
            "working_dir": "retrieval/",
            "commands": [
                "python eval_beir_sbert_canonical.py --model YOUR_MODEL_NAME_OR_PATH --dataset TASK_NAME --output_file PATH_TO_YOUR_SCORE_FILE --results_file PATH_TO_YOUR_RETRIEVAL_RESULTS_FILE"
            ],
            "expected_artifacts": ["YOUR_MODEL_NAME_OR_PATH", "TASK_NAME"]
        },
        {
            "id": "retrieval_bm25",
            "description": "Run BM25 retrieval",
            "working_dir": "retrieval/",
            "commands": [
                "python modify_corpus_for_bm25.py --dataset DATASET_NAME --output_metadir OUTPUT_DIR --index_dir INDEX_DIR --top_k TOP_K --k1 K1 --b B --stage all"
            ],
            "expected_artifacts": ["DATASET_NAME", "OUTPUT_DIR", "INDEX_DIR", "TOP_K", "K1", "B"]
        },
        {
            "id": "retrieval_api",
            "description": "Run API-based models",
            "working_dir": "retrieval/",
            "commands": [
                "python eval_voyage.py --dataset TASK_NAME --model MODEL_NAME --api_key_fp PATH_TO_YOUR_API_KEY_FILE --batch_size YOUR_BATCH_SIZE --output_file PATH_TO_YOUR_SCORE_FILE --results_file PATH_TO_YOUR_RETRIEVAL_RESULTS_FILE"
            ],
            "expected_artifacts": ["TASK_NAME", "MODEL_NAME", "PATH_TO_YOUR_API_KEY_FILE", "YOUR_BATCH_SIZE"]
        },
        {
            "id": "generation",
            "description": "Run code generation",
            "working_dir": "generation/",
            "commands": [
                "python main.py --task TASK_NAME --model MODEL_NAME --dataset_path DATASET_PATH --allow_code_execution"
            ],
            "expected_artifacts": ["TASK_NAME", "MODEL_NAME", "DATASET_PATH"]
        }
    ]
}