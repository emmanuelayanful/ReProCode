{
  "paper_id": "P06",
  "repo_name": "salesforce/CodeT5",
  "env": {
    "type": "conda",
    "setup_commands": [
      "source $CONDA_PREFIX/etc/profile.d/conda.sh && conda create -n codet5 -y",
      "source $CONDA_PREFIX/etc/profile.d/conda.sh && conda activate codet5",
      "conda install -c conda-forge -y micromamba",
      "micromamba install -c conda-forge -y python=3.8 pytorch=1.10.0 torchvision=0.11.1 torchaudio=0.10.0 cudatoolkit=11.3.1 -y"
    ]
  },
  "steps": [
    {
      "id": "install_dependencies",
      "description": "Installing dependencies",
      "working_dir": ".",
      "commands": [
        "micromamba install -c conda-forge -y pandas=1.3.2 scikit-learn=0.24.2 tqdm=4.62.3",
        "micromamba install -c conda-forge -y jupyterlab=3.1.14 matplotlib=3.4.3 seaborn=0.11.2",
        "micromamba install -c conda-forge -y pycodestyle=2.8.0 black=21.6b0 flake8=3.9.2",
        "micromamba install -c conda-forge -y isort=5.9.3",
        "micromamba install -c conda-forge -y pytest=6.2.4 pytest-cov=2.12.1",
        "micromamba install -c conda-forge -y sphinx=4.2.0 sphinx_rtd_theme=0.5.2",
        "micromamba install -c conda-forge -y flake8-docstrings=1.6.0"
      ],
      "expected_artifacts": []
    },
    {
      "id": "download_data",
      "description": "Downloading data",
      "working_dir": "CodeT5",
      "commands": [
        "wget https://s3.amazonaws.com/datasets.huggingface.co/codet5/codet5-base-multi-sum/config.json",
        "wget https://s3.amazonaws.com/datasets.huggingface.co/codet5/codet5-base-multi-sum/pytorch_model.bin",
        "wget https://s3.amazonaws.com/datasets.huggingface.co/codet5/codet5-base-multi-sum/tokenizer.json",
        "wget https://s3.amazonaws.com/datasets.huggingface.co/codet5/codet5-base-multi-sum/special_tokens_map.json"
      ],
      "expected_artifacts": [
        "config.json",
        "pytorch_model.bin",
        "tokenizer.json",
        "special_tokens_map.json"
      ]
    },
    {
      "id": "run_main_experiment",
      "description": "Running the main experiment",
      "working_dir": "CodeT5",
      "commands": [
        "python run_gen.py --model_name_or_path=codet5-base-multi-sum --input_file=input.txt --output_file=output.txt"
      ],
      "expected_artifacts": [
        "output.txt"
      ]
    }
  ]
}